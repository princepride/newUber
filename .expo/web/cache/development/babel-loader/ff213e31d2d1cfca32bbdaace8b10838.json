{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { TextInput, Button, List } from 'react-native-paper';\nimport tw from 'tailwind-react-native-classnames';\nimport { useStateContext } from \"../context/ContextProvider\";\nimport React, { useState, useEffect } from 'react';\nimport { postData } from \"../fetchMethod\";\nimport { backendhost } from \"../configure\";\nimport ImageViewer from 'react-native-image-zoom-viewer';\nimport Axios from 'axios';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar SetPickUp = function SetPickUp(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useStateContext = useStateContext(),\n      profile = _useStateContext.profile,\n      scheduleTime = _useStateContext.scheduleTime,\n      hour = _useStateContext.hour,\n      minute = _useStateContext.minute;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      destination = _useState2[0],\n      setDestination = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showImage = _useState4[0],\n      setShowImage = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      imagesrc = _useState6[0],\n      setImagesrc = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      routeName = _useState8[0],\n      setRouteName = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      sumDistance = _useState10[0],\n      setSumDistance = _useState10[1];\n\n  var _useState11 = useState({}),\n      _useState12 = _slicedToArray(_useState11, 2),\n      dict = _useState12[0],\n      setDict = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      route = _useState14[0],\n      setRoute = _useState14[1];\n\n  var handleClick = function handleClick() {\n    Axios.post(backendhost + 'map', {\n      destination: destination == '' ? profile.destination : destination,\n      hour: hour,\n      minute: minute\n    }).then(function (respose) {\n      setImagesrc(respose.data[0]);\n      setRouteName(respose.data[1]);\n      setSumDistance(respose.data[2]);\n      setRoute(respose.data[3]);\n      setShowImage(true);\n    });\n  };\n\n  console.log(scheduleTime);\n  return _jsxs(SafeAreaView, {\n    style: tw(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"top-8 flex-1\"]))),\n    children: [_jsx(TextInput, {\n      style: tw(_templateObject2 || (_templateObject2 = _taggedTemplateLiteralLoose([\"w-full\"]))),\n      theme: {\n        roundness: 50\n      },\n      mode: \"outlined\",\n      label: \"Start Place\",\n      placeholder: \"Where to?\",\n      value: \"University Town, NUS\",\n      editable: false,\n      left: _jsx(TextInput.Icon, {\n        icon: \"magnify\"\n      })\n    }), _jsx(View, {\n      style: tw(_templateObject3 || (_templateObject3 = _taggedTemplateLiteralLoose([\"pt-1\"])))\n    }), _jsx(TextInput, {\n      style: tw(_templateObject4 || (_templateObject4 = _taggedTemplateLiteralLoose([\"w-full\"]))),\n      theme: {\n        roundness: 50\n      },\n      mode: \"outlined\",\n      label: \"Go To Pin\",\n      placeholder: profile.destination,\n      onChangeText: function onChangeText(text) {\n        return setDestination(text);\n      },\n      left: _jsx(TextInput.Icon, {\n        icon: \"magnify\"\n      })\n    }), _jsx(View, {\n      style: tw(_templateObject5 || (_templateObject5 = _taggedTemplateLiteralLoose([\"p-1\"])))\n    }), _jsx(Button, {\n      style: tw(_templateObject6 || (_templateObject6 = _taggedTemplateLiteralLoose([\"w-32 pt-2\"]))),\n      theme: {\n        roundness: 50\n      },\n      mode: \"contained\",\n      onPress: function onPress() {\n        return handleClick();\n      },\n      children: \"Confirm\"\n    }), showImage && _jsxs(_Fragment, {\n      children: [_jsx(View, {\n        style: tw(_templateObject7 || (_templateObject7 = _taggedTemplateLiteralLoose([\"w-full h-64 p-1\"]))),\n        children: _jsx(ImageViewer, {\n          imageUrls: [{\n            url: \"data:image/png;base64, \" + imagesrc\n          }],\n          renderIndicator: function renderIndicator(currentIndex, allSize) {\n            return \"\";\n          }\n        })\n      }), _jsxs(Text, {\n        style: tw(_templateObject8 || (_templateObject8 = _taggedTemplateLiteralLoose([\"font-bold text-lg text-center\"]))),\n        children: [\"The distance of this trip is \", sumDistance.toFixed(2), \" km\"]\n      }), _jsx(ScrollView, {\n        contentContainerStyle: {\n          paddingHorizontal: 12\n        },\n        children: route.map(function (route, index) {\n          var _routeName$index;\n\n          return _jsxs(List.Accordion, {\n            title: route,\n            left: function left(props) {\n              return _jsx(List.Icon, _objectSpread(_objectSpread({}, props), {}, {\n                icon: \"crosshairs-gps\",\n                color: \"#0a48f2\"\n              }));\n            },\n            children: [console.log(typeof routeName[index]), (_routeName$index = routeName[index]) == null ? void 0 : _routeName$index.map(function (name) {\n              return _jsx(List.Item, {\n                style: tw(_templateObject9 || (_templateObject9 = _taggedTemplateLiteralLoose([\"left-4\"]))),\n                title: name,\n                left: function left(props) {\n                  return _jsx(List.Icon, _objectSpread(_objectSpread({}, props), {}, {\n                    icon: \"arrow-down-thin-circle-outline\",\n                    color: \"#9ddced\"\n                  }));\n                }\n              }, \"item-\" + route + \"-\" + name);\n            })]\n          }, \"accordion-\" + route);\n        })\n      }), _jsx(View, {\n        style: tw(_templateObject10 || (_templateObject10 = _taggedTemplateLiteralLoose([\"pb-8\"])))\n      })]\n    })]\n  });\n};\n\nexport default SetPickUp;\nvar styles = StyleSheet.create({});","map":{"version":3,"names":["TextInput","Button","List","tw","useStateContext","React","useState","useEffect","postData","backendhost","ImageViewer","Axios","SetPickUp","navigation","profile","scheduleTime","hour","minute","destination","setDestination","showImage","setShowImage","imagesrc","setImagesrc","routeName","setRouteName","sumDistance","setSumDistance","dict","setDict","route","setRoute","handleClick","post","then","respose","data","console","log","roundness","text","url","currentIndex","allSize","toFixed","paddingHorizontal","map","index","props","name","styles","StyleSheet","create"],"sources":["C:/Users/wangz/Desktop/project/newUber/screens/SetPickUp.jsx"],"sourcesContent":["import { StyleSheet, View, SafeAreaView, Image, Text, Modal, ScrollView } from 'react-native'\r\nimport { TextInput, Button, List } from 'react-native-paper';\r\nimport tw from 'tailwind-react-native-classnames'\r\nimport { useStateContext } from '../context/ContextProvider'\r\nimport React, { useState, useEffect } from 'react'\r\nimport { postData } from '../fetchMethod'\r\nimport { backendhost } from '../configure' \r\nimport ImageViewer from 'react-native-image-zoom-viewer';\r\nimport Axios from 'axios';\r\n\r\nconst SetPickUp = ({ navigation }) => {\r\n  const { profile, scheduleTime, hour, minute } = useStateContext();\r\n  const [destination, setDestination] = useState('');\r\n  const [showImage, setShowImage ] = useState(false)\r\n  const [imagesrc, setImagesrc] = useState('')\r\n  const [routeName, setRouteName] = useState([])\r\n  const [sumDistance, setSumDistance] = useState(0)\r\n  const [dict, setDict] = useState({})\r\n  const [route, setRoute] = useState([])\r\n  //const [ finalRoute, setFinalRoute] = useState([])\r\n  // const handleClick = () => {\r\n  //   console.log(destination)\r\n  //   postData(backendhost+'map', { destination: destination})\r\n  //   .then((image) => {\r\n  //       console.log(image)\r\n  //       // setImagesrc(image.imgUrl)\r\n  //       //console.log(typeof(imagesrc))\r\n\r\n  //   })\r\n  //   setShowImage(true)\r\n  //   console.log(showImage)\r\n  //   console.log(imagesrc)\r\n  // }\r\n\r\n  const handleClick = () => {\r\n\r\n    Axios.post(backendhost+'map', { destination:destination == ''?profile.destination:destination, hour:hour, minute:minute }).then((respose) => {\r\n      setImagesrc(respose.data[0])\r\n      setRouteName(respose.data[1])\r\n      setSumDistance(respose.data[2])\r\n      setRoute(respose.data[3])\r\n      //let temp = []\r\n      //let i = 1\r\n      //let j = 0\r\n      //let pre = 0\r\n      //console.log(routeName)\r\n      //console.log(route)\r\n      //while(i < route.length && j < routeName.length){\r\n      //  if(routeName[j] === route[i]){\r\n      //    console.log(\"hello\")\r\n      //    temp.push(routeName.slice(pre+1,j))\r\n      //    pre = j\r\n      //    i += 1\r\n      //    j += 1\r\n      //  }\r\n      //  else{\r\n      //    j += 1\r\n      //  }\r\n      //}\r\n      //console.log(temp)\r\n      //setFinalRoute(temp)\r\n      //console.log(finalRoute)\r\n      setShowImage(true)\r\n    })\r\n  }\r\n  //useEffect(() => {setPlace(profile.destination)},[])\r\n  console.log(scheduleTime)\r\n  return (\r\n    <SafeAreaView style={tw`top-8 flex-1`}>\r\n      <TextInput\r\n        style={tw`w-full`}\r\n        theme={{ roundness: 50 }}\r\n        mode='outlined'\r\n        label=\"Start Place\"\r\n        placeholder='Where to?'\r\n        value=\"University Town, NUS\"\r\n        editable={false}\r\n        left={<TextInput.Icon icon=\"magnify\" />}\r\n      //onFocus={() => navigation.navigate(\"SetPickUp\")}\r\n      />\r\n      <View style={tw`pt-1`}></View>\r\n      <TextInput\r\n        style={tw`w-full`}\r\n        theme={{ roundness: 50 }}\r\n        mode='outlined'\r\n        label=\"Go To Pin\"\r\n        placeholder={profile.destination}\r\n        onChangeText={text => setDestination(text)}\r\n        left={<TextInput.Icon icon=\"magnify\" />}\r\n      //onFocus={() => navigation.navigate(\"SetPickUp\")}\r\n      />\r\n      <View style={tw`p-1`}></View>\r\n      <Button\r\n        style={tw`w-32 pt-2`}\r\n        theme={{ roundness: 50 }}\r\n        mode=\"contained\"\r\n        onPress={() => handleClick()}\r\n      >\r\n        Confirm\r\n      </Button>\r\n      {/* {showImage && setTimeout(()=>(<>\r\n      <Image style={tw`w-full h-40 p-1`} source={`data:image/png;base64, ${imagesrc}`}></Image>\r\n      <Text style={tw`text-xl italic p-1`}>{str}</Text>\r\n      </>),3000)} */}\r\n            {showImage && <>\r\n      {/*<Image style={tw`w-full h-40 p-1`} source={{uri:`data:image/png;base64, ${imagesrc}`}}></Image>*/}\r\n      <View style={tw`w-full h-64 p-1`}>\r\n      <ImageViewer imageUrls={[{url:`data:image/png;base64, ${imagesrc}`,}]} renderIndicator={(currentIndex, allSize) =>\"\"}/>\r\n      </View>\r\n      {/*{routeName.map((route) => <List.Item title={route} />)}*/}\r\n      <Text style={tw`font-bold text-lg text-center`}>The distance of this trip is {sumDistance.toFixed(2)} km</Text>\r\n      <ScrollView contentContainerStyle={{paddingHorizontal: 12}}>\r\n      {route.map((route, index) => \r\n      (<List.Accordion title={route} key={`accordion-${route}`} left={props => <List.Icon {...props} icon=\"crosshairs-gps\" color=\"#0a48f2\"/>}>\r\n        {console.log(typeof(routeName[index]))}\r\n        {routeName[index]?.map((name)=>(<List.Item style={tw`left-4`} title={name} key={`item-${route}-${name}`} left={props => <List.Icon {...props} icon=\"arrow-down-thin-circle-outline\" color=\"#9ddced\"/>}/>))}\r\n      </List.Accordion>))}\r\n      </ScrollView>\r\n      <View style={tw`pb-8`}></View>\r\n      </>}\r\n    </SafeAreaView>\r\n  )\r\n}\r\n\r\nexport default SetPickUp\r\n\r\nconst styles = StyleSheet.create({})"],"mappings":"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"},"metadata":{},"sourceType":"module"}