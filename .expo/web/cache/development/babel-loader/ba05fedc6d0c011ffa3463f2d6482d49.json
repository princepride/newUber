{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nvar _reactJsxRuntime = require(\"react/jsx-runtime\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar react_native_1 = require(\"react-native-web/dist/index\");\n\nvar image_zoom_style_1 = require(\"./image-zoom.style\");\n\nvar image_zoom_type_1 = require(\"./image-zoom.type\");\n\nvar ImageViewer = function (_super) {\n  __extends(ImageViewer, _super);\n\n  function ImageViewer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = new image_zoom_type_1.ImageZoomState();\n    _this.lastPositionX = null;\n    _this.positionX = 0;\n    _this.animatedPositionX = new react_native_1.Animated.Value(0);\n    _this.lastPositionY = null;\n    _this.positionY = 0;\n    _this.animatedPositionY = new react_native_1.Animated.Value(0);\n    _this.scale = 1;\n    _this.animatedScale = new react_native_1.Animated.Value(1);\n    _this.zoomLastDistance = null;\n    _this.zoomCurrentDistance = 0;\n    _this.lastTouchStartTime = 0;\n    _this.horizontalWholeOuterCounter = 0;\n    _this.swipeDownOffset = 0;\n    _this.horizontalWholeCounter = 0;\n    _this.verticalWholeCounter = 0;\n    _this.centerDiffX = 0;\n    _this.centerDiffY = 0;\n    _this.lastClickTime = 0;\n    _this.doubleClickX = 0;\n    _this.doubleClickY = 0;\n    _this.isDoubleClick = false;\n    _this.isLongPress = false;\n    _this.isHorizontalWrap = false;\n    _this.imagePanResponder = react_native_1.PanResponder.create({\n      onStartShouldSetPanResponder: _this.props.onStartShouldSetPanResponder,\n      onPanResponderTerminationRequest: _this.props.onPanResponderTerminationRequest,\n      onMoveShouldSetPanResponder: _this.props.onMoveShouldSetPanResponder,\n      onPanResponderGrant: function onPanResponderGrant(evt) {\n        _this.lastPositionX = null;\n        _this.lastPositionY = null;\n        _this.zoomLastDistance = null;\n        _this.horizontalWholeCounter = 0;\n        _this.verticalWholeCounter = 0;\n        _this.lastTouchStartTime = new Date().getTime();\n        _this.isDoubleClick = false;\n        _this.isLongPress = false;\n        _this.isHorizontalWrap = false;\n\n        if (_this.singleClickTimeout) {\n          clearTimeout(_this.singleClickTimeout);\n        }\n\n        if (evt.nativeEvent.changedTouches.length > 1) {\n          var centerX = (evt.nativeEvent.changedTouches[0].pageX + evt.nativeEvent.changedTouches[1].pageX) / 2;\n          _this.centerDiffX = centerX - _this.props.cropWidth / 2;\n          var centerY = (evt.nativeEvent.changedTouches[0].pageY + evt.nativeEvent.changedTouches[1].pageY) / 2;\n          _this.centerDiffY = centerY - _this.props.cropHeight / 2;\n        }\n\n        if (_this.longPressTimeout) {\n          clearTimeout(_this.longPressTimeout);\n        }\n\n        var _a = evt.nativeEvent,\n            locationX = _a.locationX,\n            locationY = _a.locationY,\n            pageX = _a.pageX,\n            pageY = _a.pageY;\n        _this.longPressTimeout = setTimeout(function () {\n          _this.isLongPress = true;\n\n          if (_this.props.onLongPress) {\n            _this.props.onLongPress({\n              locationX: locationX,\n              locationY: locationY,\n              pageX: pageX,\n              pageY: pageY\n            });\n          }\n        }, _this.props.longPressTime);\n\n        if (evt.nativeEvent.changedTouches.length <= 1) {\n          if (new Date().getTime() - _this.lastClickTime < (_this.props.doubleClickInterval || 0)) {\n            _this.lastClickTime = 0;\n            _this.doubleClickX = evt.nativeEvent.changedTouches[0].pageX;\n            _this.doubleClickY = evt.nativeEvent.changedTouches[0].pageY;\n\n            if (_this.props.onDoubleClick) {\n              _this.props.onDoubleClick({\n                locationX: evt.nativeEvent.changedTouches[0].locationX,\n                locationY: evt.nativeEvent.changedTouches[0].locationY,\n                pageX: _this.doubleClickX,\n                pageY: _this.doubleClickY\n              });\n            }\n\n            clearTimeout(_this.longPressTimeout);\n            _this.isDoubleClick = true;\n\n            if (_this.props.enableDoubleClickZoom) {\n              if (_this.scale > 1 || _this.scale < 1) {\n                _this.scale = 1;\n                _this.positionX = 0;\n                _this.positionY = 0;\n              } else {\n                var beforeScale = _this.scale;\n                _this.scale = 2;\n                var diffScale = _this.scale - beforeScale;\n                _this.positionX = (_this.props.cropWidth / 2 - _this.doubleClickX) * diffScale / _this.scale;\n                _this.positionY = (_this.props.cropHeight / 2 - _this.doubleClickY) * diffScale / _this.scale;\n              }\n\n              _this.imageDidMove('centerOn');\n\n              react_native_1.Animated.parallel([react_native_1.Animated.timing(_this.animatedScale, {\n                toValue: _this.scale,\n                duration: 100,\n                useNativeDriver: !!_this.props.useNativeDriver\n              }), react_native_1.Animated.timing(_this.animatedPositionX, {\n                toValue: _this.positionX,\n                duration: 100,\n                useNativeDriver: !!_this.props.useNativeDriver\n              }), react_native_1.Animated.timing(_this.animatedPositionY, {\n                toValue: _this.positionY,\n                duration: 100,\n                useNativeDriver: !!_this.props.useNativeDriver\n              })]).start();\n            }\n          } else {\n            _this.lastClickTime = new Date().getTime();\n          }\n        }\n      },\n      onPanResponderMove: function onPanResponderMove(evt, gestureState) {\n        if (_this.isDoubleClick) {\n          return;\n        }\n\n        if (evt.nativeEvent.changedTouches.length <= 1) {\n          var diffX = gestureState.dx - (_this.lastPositionX || 0);\n\n          if (_this.lastPositionX === null) {\n            diffX = 0;\n          }\n\n          var diffY = gestureState.dy - (_this.lastPositionY || 0);\n\n          if (_this.lastPositionY === null) {\n            diffY = 0;\n          }\n\n          _this.lastPositionX = gestureState.dx;\n          _this.lastPositionY = gestureState.dy;\n          _this.horizontalWholeCounter += diffX;\n          _this.verticalWholeCounter += diffY;\n\n          if (Math.abs(_this.horizontalWholeCounter) > 5 || Math.abs(_this.verticalWholeCounter) > 5) {\n            clearTimeout(_this.longPressTimeout);\n          }\n\n          if (_this.props.panToMove) {\n            if (_this.swipeDownOffset === 0) {\n              if (Math.abs(diffX) > Math.abs(diffY)) {\n                _this.isHorizontalWrap = true;\n              }\n\n              if (_this.props.imageWidth * _this.scale > _this.props.cropWidth) {\n                if (_this.horizontalWholeOuterCounter > 0) {\n                  if (diffX < 0) {\n                    if (_this.horizontalWholeOuterCounter > Math.abs(diffX)) {\n                      _this.horizontalWholeOuterCounter += diffX;\n                      diffX = 0;\n                    } else {\n                      diffX += _this.horizontalWholeOuterCounter;\n                      _this.horizontalWholeOuterCounter = 0;\n\n                      if (_this.props.horizontalOuterRangeOffset) {\n                        _this.props.horizontalOuterRangeOffset(0);\n                      }\n                    }\n                  } else {\n                    _this.horizontalWholeOuterCounter += diffX;\n                  }\n                } else if (_this.horizontalWholeOuterCounter < 0) {\n                  if (diffX > 0) {\n                    if (Math.abs(_this.horizontalWholeOuterCounter) > diffX) {\n                      _this.horizontalWholeOuterCounter += diffX;\n                      diffX = 0;\n                    } else {\n                      diffX += _this.horizontalWholeOuterCounter;\n                      _this.horizontalWholeOuterCounter = 0;\n\n                      if (_this.props.horizontalOuterRangeOffset) {\n                        _this.props.horizontalOuterRangeOffset(0);\n                      }\n                    }\n                  } else {\n                    _this.horizontalWholeOuterCounter += diffX;\n                  }\n                } else {}\n\n                _this.positionX += diffX / _this.scale;\n                var horizontalMax = (_this.props.imageWidth * _this.scale - _this.props.cropWidth) / 2 / _this.scale;\n\n                if (_this.positionX < -horizontalMax) {\n                  _this.positionX = -horizontalMax;\n                  _this.horizontalWholeOuterCounter += -1 / 1e10;\n                } else if (_this.positionX > horizontalMax) {\n                  _this.positionX = horizontalMax;\n                  _this.horizontalWholeOuterCounter += 1 / 1e10;\n                }\n\n                _this.animatedPositionX.setValue(_this.positionX);\n              } else {\n                _this.horizontalWholeOuterCounter += diffX;\n              }\n\n              if (_this.horizontalWholeOuterCounter > (_this.props.maxOverflow || 0)) {\n                _this.horizontalWholeOuterCounter = _this.props.maxOverflow || 0;\n              } else if (_this.horizontalWholeOuterCounter < -(_this.props.maxOverflow || 0)) {\n                _this.horizontalWholeOuterCounter = -(_this.props.maxOverflow || 0);\n              }\n\n              if (_this.horizontalWholeOuterCounter !== 0) {\n                if (_this.props.horizontalOuterRangeOffset) {\n                  _this.props.horizontalOuterRangeOffset(_this.horizontalWholeOuterCounter);\n                }\n              }\n            }\n\n            if (_this.props.imageHeight * _this.scale > _this.props.cropHeight) {\n              _this.positionY += diffY / _this.scale;\n\n              _this.animatedPositionY.setValue(_this.positionY);\n            } else {\n              if (_this.props.enableSwipeDown && !_this.isHorizontalWrap) {\n                _this.swipeDownOffset += diffY;\n\n                if (_this.swipeDownOffset > 0) {\n                  _this.positionY += diffY / _this.scale;\n\n                  _this.animatedPositionY.setValue(_this.positionY);\n\n                  _this.scale = _this.scale - diffY / 1000;\n\n                  _this.animatedScale.setValue(_this.scale);\n                }\n              }\n            }\n          }\n        } else {\n          if (_this.longPressTimeout) {\n            clearTimeout(_this.longPressTimeout);\n          }\n\n          if (_this.props.pinchToZoom) {\n            var minX = void 0;\n            var maxX = void 0;\n\n            if (evt.nativeEvent.changedTouches[0].locationX > evt.nativeEvent.changedTouches[1].locationX) {\n              minX = evt.nativeEvent.changedTouches[1].pageX;\n              maxX = evt.nativeEvent.changedTouches[0].pageX;\n            } else {\n              minX = evt.nativeEvent.changedTouches[0].pageX;\n              maxX = evt.nativeEvent.changedTouches[1].pageX;\n            }\n\n            var minY = void 0;\n            var maxY = void 0;\n\n            if (evt.nativeEvent.changedTouches[0].locationY > evt.nativeEvent.changedTouches[1].locationY) {\n              minY = evt.nativeEvent.changedTouches[1].pageY;\n              maxY = evt.nativeEvent.changedTouches[0].pageY;\n            } else {\n              minY = evt.nativeEvent.changedTouches[0].pageY;\n              maxY = evt.nativeEvent.changedTouches[1].pageY;\n            }\n\n            var widthDistance = maxX - minX;\n            var heightDistance = maxY - minY;\n            var diagonalDistance = Math.sqrt(widthDistance * widthDistance + heightDistance * heightDistance);\n            _this.zoomCurrentDistance = Number(diagonalDistance.toFixed(1));\n\n            if (_this.zoomLastDistance !== null) {\n              var distanceDiff = (_this.zoomCurrentDistance - _this.zoomLastDistance) / 200;\n              var zoom = _this.scale + distanceDiff;\n\n              if (zoom < (_this.props.minScale || 0)) {\n                zoom = _this.props.minScale || 0;\n              }\n\n              if (zoom > (_this.props.maxScale || 0)) {\n                zoom = _this.props.maxScale || 0;\n              }\n\n              var beforeScale = _this.scale;\n              _this.scale = zoom;\n\n              _this.animatedScale.setValue(_this.scale);\n\n              var diffScale = _this.scale - beforeScale;\n              _this.positionX -= _this.centerDiffX * diffScale / _this.scale;\n              _this.positionY -= _this.centerDiffY * diffScale / _this.scale;\n\n              _this.animatedPositionX.setValue(_this.positionX);\n\n              _this.animatedPositionY.setValue(_this.positionY);\n            }\n\n            _this.zoomLastDistance = _this.zoomCurrentDistance;\n          }\n        }\n\n        _this.imageDidMove('onPanResponderMove');\n      },\n      onPanResponderRelease: function onPanResponderRelease(evt, gestureState) {\n        if (_this.longPressTimeout) {\n          clearTimeout(_this.longPressTimeout);\n        }\n\n        if (_this.isDoubleClick) {\n          return;\n        }\n\n        if (_this.isLongPress) {\n          return;\n        }\n\n        var moveDistance = Math.sqrt(gestureState.dx * gestureState.dx + gestureState.dy * gestureState.dy);\n        var _a = evt.nativeEvent,\n            locationX = _a.locationX,\n            locationY = _a.locationY,\n            pageX = _a.pageX,\n            pageY = _a.pageY;\n\n        if (evt.nativeEvent.changedTouches.length === 1 && moveDistance < (_this.props.clickDistance || 0)) {\n          _this.singleClickTimeout = setTimeout(function () {\n            if (_this.props.onClick) {\n              _this.props.onClick({\n                locationX: locationX,\n                locationY: locationY,\n                pageX: pageX,\n                pageY: pageY\n              });\n            }\n          }, _this.props.doubleClickInterval);\n        } else {\n          if (_this.props.responderRelease) {\n            _this.props.responderRelease(gestureState.vx, _this.scale);\n          }\n\n          _this.panResponderReleaseResolve();\n        }\n      },\n      onPanResponderTerminate: function onPanResponderTerminate() {}\n    });\n\n    _this.resetScale = function () {\n      _this.positionX = 0;\n      _this.positionY = 0;\n      _this.scale = 1;\n\n      _this.animatedScale.setValue(1);\n    };\n\n    _this.panResponderReleaseResolve = function () {\n      if (_this.props.enableSwipeDown && _this.props.swipeDownThreshold) {\n        if (_this.swipeDownOffset > _this.props.swipeDownThreshold) {\n          if (_this.props.onSwipeDown) {\n            _this.props.onSwipeDown();\n          }\n\n          return;\n        }\n      }\n\n      if (_this.props.enableCenterFocus && _this.scale < 1) {\n        _this.scale = 1;\n        react_native_1.Animated.timing(_this.animatedScale, {\n          toValue: _this.scale,\n          duration: 100,\n          useNativeDriver: !!_this.props.useNativeDriver\n        }).start();\n      }\n\n      if (_this.props.imageWidth * _this.scale <= _this.props.cropWidth) {\n        _this.positionX = 0;\n        react_native_1.Animated.timing(_this.animatedPositionX, {\n          toValue: _this.positionX,\n          duration: 100,\n          useNativeDriver: !!_this.props.useNativeDriver\n        }).start();\n      }\n\n      if (_this.props.imageHeight * _this.scale <= _this.props.cropHeight) {\n        _this.positionY = 0;\n        react_native_1.Animated.timing(_this.animatedPositionY, {\n          toValue: _this.positionY,\n          duration: 100,\n          useNativeDriver: !!_this.props.useNativeDriver\n        }).start();\n      }\n\n      if (_this.props.imageHeight * _this.scale > _this.props.cropHeight) {\n        var verticalMax = (_this.props.imageHeight * _this.scale - _this.props.cropHeight) / 2 / _this.scale;\n\n        if (_this.positionY < -verticalMax) {\n          _this.positionY = -verticalMax;\n        } else if (_this.positionY > verticalMax) {\n          _this.positionY = verticalMax;\n        }\n\n        react_native_1.Animated.timing(_this.animatedPositionY, {\n          toValue: _this.positionY,\n          duration: 100,\n          useNativeDriver: !!_this.props.useNativeDriver\n        }).start();\n      }\n\n      if (_this.props.imageWidth * _this.scale > _this.props.cropWidth) {\n        var horizontalMax = (_this.props.imageWidth * _this.scale - _this.props.cropWidth) / 2 / _this.scale;\n\n        if (_this.positionX < -horizontalMax) {\n          _this.positionX = -horizontalMax;\n        } else if (_this.positionX > horizontalMax) {\n          _this.positionX = horizontalMax;\n        }\n\n        react_native_1.Animated.timing(_this.animatedPositionX, {\n          toValue: _this.positionX,\n          duration: 100,\n          useNativeDriver: !!_this.props.useNativeDriver\n        }).start();\n      }\n\n      if (_this.props.enableCenterFocus && _this.scale === 1) {\n        _this.positionX = 0;\n        _this.positionY = 0;\n        react_native_1.Animated.timing(_this.animatedPositionX, {\n          toValue: _this.positionX,\n          duration: 100,\n          useNativeDriver: !!_this.props.useNativeDriver\n        }).start();\n        react_native_1.Animated.timing(_this.animatedPositionY, {\n          toValue: _this.positionY,\n          duration: 100,\n          useNativeDriver: !!_this.props.useNativeDriver\n        }).start();\n      }\n\n      _this.horizontalWholeOuterCounter = 0;\n      _this.swipeDownOffset = 0;\n\n      _this.imageDidMove('onPanResponderRelease');\n    };\n\n    return _this;\n  }\n\n  ImageViewer.prototype.componentDidMount = function () {\n    if (this.props.centerOn) {\n      this.centerOn(this.props.centerOn);\n    }\n  };\n\n  ImageViewer.prototype.componentDidUpdate = function (prevProps) {\n    if (this.props.centerOn && !prevProps.centerOn || this.props.centerOn && prevProps.centerOn && this.didCenterOnChange(prevProps.centerOn, this.props.centerOn)) {\n      this.centerOn(this.props.centerOn);\n    }\n  };\n\n  ImageViewer.prototype.imageDidMove = function (type) {\n    if (this.props.onMove) {\n      this.props.onMove({\n        type: type,\n        positionX: this.positionX,\n        positionY: this.positionY,\n        scale: this.scale,\n        zoomCurrentDistance: this.zoomCurrentDistance\n      });\n    }\n  };\n\n  ImageViewer.prototype.didCenterOnChange = function (params, paramsNext) {\n    return params.x !== paramsNext.x || params.y !== paramsNext.y || params.scale !== paramsNext.scale;\n  };\n\n  ImageViewer.prototype.centerOn = function (params) {\n    var _this = this;\n\n    this.positionX = params.x;\n    this.positionY = params.y;\n    this.scale = params.scale;\n    var duration = params.duration || 300;\n    react_native_1.Animated.parallel([react_native_1.Animated.timing(this.animatedScale, {\n      toValue: this.scale,\n      duration: duration,\n      useNativeDriver: !!this.props.useNativeDriver\n    }), react_native_1.Animated.timing(this.animatedPositionX, {\n      toValue: this.positionX,\n      duration: duration,\n      useNativeDriver: !!this.props.useNativeDriver\n    }), react_native_1.Animated.timing(this.animatedPositionY, {\n      toValue: this.positionY,\n      duration: duration,\n      useNativeDriver: !!this.props.useNativeDriver\n    })]).start(function () {\n      _this.imageDidMove('centerOn');\n    });\n  };\n\n  ImageViewer.prototype.handleLayout = function (event) {\n    if (this.props.layoutChange) {\n      this.props.layoutChange(event);\n    }\n  };\n\n  ImageViewer.prototype.reset = function () {\n    this.scale = 1;\n    this.animatedScale.setValue(this.scale);\n    this.positionX = 0;\n    this.animatedPositionX.setValue(this.positionX);\n    this.positionY = 0;\n    this.animatedPositionY.setValue(this.positionY);\n  };\n\n  ImageViewer.prototype.render = function () {\n    var animateConf = {\n      transform: [{\n        scale: this.animatedScale\n      }, {\n        translateX: this.animatedPositionX\n      }, {\n        translateY: this.animatedPositionY\n      }]\n    };\n    var parentStyles = react_native_1.StyleSheet.flatten(this.props.style);\n    return _reactJsxRuntime.jsx(react_native_1.View, _objectSpread(_objectSpread({\n      style: __assign(__assign(__assign({}, image_zoom_style_1.default.container), parentStyles), {\n        width: this.props.cropWidth,\n        height: this.props.cropHeight\n      })\n    }, this.imagePanResponder.panHandlers), {}, {\n      children: _reactJsxRuntime.jsx(react_native_1.Animated.View, {\n        style: animateConf,\n        renderToHardwareTextureAndroid: this.props.useHardwareTextureAndroid,\n        children: _reactJsxRuntime.jsx(react_native_1.View, {\n          onLayout: this.handleLayout.bind(this),\n          style: {\n            width: this.props.imageWidth,\n            height: this.props.imageHeight\n          },\n          children: this.props.children\n        })\n      })\n    }));\n  };\n\n  ImageViewer.defaultProps = new image_zoom_type_1.ImageZoomProps();\n  return ImageViewer;\n}(React.Component);\n\nexports.default = ImageViewer;","map":{"version":3,"mappings":"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","names":["__extends","_this","image_zoom_type_1","react_native_1","Value","create","onStartShouldSetPanResponder","props","onPanResponderTerminationRequest","onMoveShouldSetPanResponder","onPanResponderGrant","evt","lastPositionX","lastPositionY","zoomLastDistance","horizontalWholeCounter","verticalWholeCounter","lastTouchStartTime","Date","getTime","isDoubleClick","isLongPress","isHorizontalWrap","singleClickTimeout","clearTimeout","nativeEvent","changedTouches","length","centerX","pageX","centerDiffX","cropWidth","centerY","pageY","centerDiffY","cropHeight","longPressTimeout","locationX","locationY","setTimeout","onLongPress","longPressTime","lastClickTime","doubleClickInterval","doubleClickX","doubleClickY","onDoubleClick","enableDoubleClickZoom","scale","positionX","positionY","beforeScale","diffScale","imageDidMove","parallel","timing","animatedScale","toValue","duration","useNativeDriver","animatedPositionX","animatedPositionY","start","onPanResponderMove","gestureState","diffX","dx","diffY","dy","Math","abs","panToMove","swipeDownOffset","imageWidth","horizontalWholeOuterCounter","horizontalOuterRangeOffset","horizontalMax","setValue","maxOverflow","imageHeight","enableSwipeDown","pinchToZoom","minX","maxX","minY","maxY","widthDistance","heightDistance","diagonalDistance","sqrt","zoomCurrentDistance","Number","toFixed","distanceDiff","zoom","minScale","maxScale","onPanResponderRelease","moveDistance","clickDistance","onClick","responderRelease","vx","panResponderReleaseResolve","onPanResponderTerminate","swipeDownThreshold","onSwipeDown","enableCenterFocus","verticalMax","ImageViewer","centerOn","prevProps","didCenterOnChange","type","onMove","params","paramsNext","x","y","event","layoutChange","animateConf","transform","translateX","translateY","parentStyles","flatten","style","__assign","image_zoom_style_1","container","width","height","imagePanResponder","panHandlers","useHardwareTextureAndroid","handleLayout","bind","children","React","Component"],"sourceRoot":"","sources":["../../src/image-zoom/image-zoom.component.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}